<div class="app-container">

  <div class="heading-container">
    <h2>Lisää uusi henkilö</h2>
  </div>

    <form class="form-person" (ngSubmit)="onAddSubmit()"> 
      <!-- TODO: show error when required fields are not typed and disable button-->
      <!-- TODO: make more responsive when small size -->
      <div>
        <label for="name">Nimi*</label>
        <input type="text" class="form-person" id="name" required
        [(ngModel)]="person.name" name="name">
      </div>
      <div>
        <label for="dateOfBirth">Syntymäpäivä*</label>
        <input type="date" class="form-person" id="dateOfBirth" required
        [(ngModel)]="person.dateOfBirth" name="dateOfBirth">
      </div>
      <div>
        <label for="nationality">Kansalaisuus*</label>
        <input type="text" class="form-person" id="nationality" required
        [(ngModel)]="person.nationality" name="nationality">
      </div>
      <div>
        <label for="language">Äidinkieli*</label>
        <input type="text" class="form-person" id="language" required
        [(ngModel)]="person.language" name="language">
      </div>
      <div>
        <label for="ssn">Henkilötunnus</label>
        <input type="text" class="form-person" id="ssn"
        [(ngModel)]="person.ssn" name="ssn">
      </div>
      <div>
        <label for="address">Osoite</label>
        <input type="text" class="form-person" id="address" 
        [(ngModel)]="person.address" name="address">
      </div>
      <div>
        <label for="dateOfDeath">Kuolinpäivä</label>
        <input type="date" class="form-person" id="dateOfDeath"
        [(ngModel)]="person.dateOfDeath" name="dateOfDeath">
      </div>
      
      <button>Lisää uusi henkilö</button>

    </form>

  <div class="heading-container">
    <h2>Henkilöt:</h2>
  </div>

  <ul class="persons-container">
    @for (person of persons; track person.id) {

      @if (modifying) 
      {
        <!-- TODO: show error when required fields are not typed and disable button-->
        <!-- TODO: Change update to only change the flex item UI that we have pressed, not all of them -->
        <form class="form-person" (ngSubmit)="onModifySubmit(person.id, person)">
           <!-- TODO: make more responsive when small size -->
          <div>
            <label for="name">Nimi*</label>
            <input type="text" class="form-person" id="name" required
            [(ngModel)]="person.name" name="name">
          </div>
          <div>
            <label for="dateOfBirth">Syntymäpäivä*</label>
            <input type="date" class="form-person" id="dateOfBirth" required
            [(ngModel)]="person.dateOfBirth" name="dateOfBirth">
          </div>
          <div>
            <label for="nationality">Kansalaisuus*</label>
            <input type="text" class="form-person" id="nationality" required
            [(ngModel)]="person.nationality" name="nationality">
          </div>
          <div>
            <label for="language">Äidinkieli*</label>
            <input type="text" class="form-person" id="language" required
            [(ngModel)]="person.language" name="language">
          </div>
          <div>
            <label for="ssn">Henkilötunnus</label>
            <input type="text" class="form-person" id="ssn"
            [(ngModel)]="person.ssn" name="ssn">
          </div>
          <div>
            <label for="address">Osoite</label>
            <input type="text" class="form-person" id="address" 
            [(ngModel)]="person.address" name="address">
          </div>
          <div>
            <label for="dateOfDeath">Kuolinpäivä</label>
            <input type="date" class="form-person" id="dateOfDeath"
            [(ngModel)]="person.dateOfDeath" name="dateOfDeath">
          </div>
          
          <button type="submit">Tallenna muutokset</button>

          <button type="button" (click)="cancelModify()">Peruuta</button>
          
        </form>

        
      } @else {
        
          <li class="person-container">
            <p>Tunniste: <b>{{ person.id }} </b></p>
            <p>Nimi:  <b>{{ person.name }} </b></p>
            <p>Syntymäpäivä: <b>{{ person.dateOfBirth }} </b></p>
            <p>Kansalaisuus: <b>{{ person.nationality }} </b></p>
            <p>Äidinkieli: <b>{{ person.language }} </b></p>
            <p>Henkilötunnus: <b>{{ person.ssn }} </b></p>
            <p>Osoite: <b>{{ person.address }} </b></p>
            <p>Kuolinpäivä: <b>{{ person.dateOfDeath }} </b></p>

           
            <button (click)="startModify()">Muokkaa</button>
            <button (click)="removePerson(person.name, person.id)">Poista</button>
        
          </li>
      }
      
    }
  </ul>
   
  </div>
<div>
<router-outlet />